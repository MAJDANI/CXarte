<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL MAP 2.0//EN" 
	"http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="profile">

	<typeAlias alias="profile" type="com.novedia.talentmap.model.entity.Profile" />

	<resultMap id="profileResult" class="profile">
		<result property="id" column="PROFILE_ID" />
		<result property="type" column="PROFILE_TYPE" />
	</resultMap>

	<select id="get" resultMap="profileResult" parameterClass="Integer">
		SELECT * FROM PROFILE WHERE PROFILE_ID = #id#
	</select>

	<select id="getAll" resultMap="profileResult">
		SELECT * FROM PROFILE
	</select>

	<select id="getByType" resultMap="profileResult" parameterClass="String">
		SELECT * FROM PROFILE WHERE PROFILE_TYPE = #type#
	</select>

	<insert id="add" parameterClass="Profile">

		<selectKey resultClass="Integer" keyProperty="id">
			SELECT NEXT
			VALUE FOR SEQPROFILE FROM INFORMATION_SCHEMA.SYSTEM_SEQUENCES
			where
			SEQUENCE_NAME = 'SEQPROFILE'
		</selectKey>

		INSERT INTO PROFILE (
		PROFILE_ID,
		PROFILE_TYPE
		)values (
		#id#,
		upper(#type#)
		)
	</insert>

	<update id="save" parameterClass="Profile">
		UPDATE PROFILE SET PROFILE_TYPE
		= #type# WHERE PROFILE_ID = #id#
	</update>

	<delete id="delete" parameterClass="Profile">
		DELETE FROM PROFILE WHERE
		PROFILE_ID = #id#
	</delete>
</sqlMap>